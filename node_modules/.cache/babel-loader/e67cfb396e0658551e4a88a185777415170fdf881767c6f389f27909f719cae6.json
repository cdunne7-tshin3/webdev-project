{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\nvar _getIterator = require(\"@babel/runtime-corejs3/core-js/get-iterator\");\nvar _Array$isArray2 = require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\");\nvar _getIteratorMethod = require(\"@babel/runtime-corejs3/core-js/get-iterator-method\");\nvar _Symbol = require(\"@babel/runtime-corejs3/core-js-stable/symbol\");\nvar _Array$from2 = require(\"@babel/runtime-corejs3/core-js-stable/array/from\");\nvar _sliceInstanceProperty = require(\"@babel/runtime-corejs3/core-js-stable/instance/slice\");\nvar _find = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/find\"));\nvar _from = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/array/from\"));\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\nvar _isArray = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\"));\nvar _keys2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/keys\"));\nvar _startsWith = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/starts-with\"));\nvar _keys3 = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/keys\"));\nvar _includes = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/includes\"));\nvar _filter = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/filter\"));\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\nvar _set = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/set\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/toConsumableArray\"));\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/slicedToArray\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\nvar _CoreManager = _interopRequireDefault(require(\"./CoreManager\"));\nvar _ParseQuery = _interopRequireDefault(require(\"./ParseQuery\"));\nvar _LocalDatastoreUtils = require(\"./LocalDatastoreUtils\");\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n  if (typeof _Symbol === \"undefined\" || _getIteratorMethod(o) == null) {\n    if (_Array$isArray2(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function () {};\n      return {\n        s: F,\n        n: function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function () {\n      it = _getIterator(o);\n    },\n    n: function () {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function () {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  var _context18;\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = _sliceInstanceProperty(_context18 = Object.prototype.toString.call(o)).call(_context18, 8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return _Array$from2(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}\n/**\n * Provides a local datastore which can be used to store and retrieve <code>Parse.Object</code>. <br />\n * To enable this functionality, call <code>Parse.enableLocalDatastore()</code>.\n *\n * Pin object to add to local datastore\n *\n * <pre>await object.pin();</pre>\n * <pre>await object.pinWithName('pinName');</pre>\n *\n * Query pinned objects\n *\n * <pre>query.fromLocalDatastore();</pre>\n * <pre>query.fromPin();</pre>\n * <pre>query.fromPinWithName();</pre>\n *\n * <pre>const localObjects = await query.find();</pre>\n *\n * @class Parse.LocalDatastore\n * @static\n */\n\nvar LocalDatastore = {\n  isEnabled: false,\n  isSyncing: false,\n  fromPinWithName: function (name\n  /*: string*/) /*: Promise<Array<Object>>*/\n  {\n    var controller = _CoreManager.default.getLocalDatastoreController();\n    return controller.fromPinWithName(name);\n  },\n  pinWithName: function (name\n  /*: string*/, value\n  /*: any*/) /*: Promise<void>*/\n  {\n    var controller = _CoreManager.default.getLocalDatastoreController();\n    return controller.pinWithName(name, value);\n  },\n  unPinWithName: function (name\n  /*: string*/) /*: Promise<void>*/\n  {\n    var controller = _CoreManager.default.getLocalDatastoreController();\n    return controller.unPinWithName(name);\n  },\n  _getAllContents: function () /*: Promise<Object>*/\n  {\n    var controller = _CoreManager.default.getLocalDatastoreController();\n    return controller.getAllContents();\n  },\n  // Use for testing\n  _getRawStorage: function () /*: Promise<Object>*/\n  {\n    var controller = _CoreManager.default.getLocalDatastoreController();\n    return controller.getRawStorage();\n  },\n  _clear: function () /*: Promise<void>*/\n  {\n    var controller = _CoreManager.default.getLocalDatastoreController();\n    return controller.clear();\n  },\n  // Pin the object and children recursively\n  // Saves the object and children key to Pin Name\n  _handlePinAllWithName: function (name\n  /*: string*/, objects\n  /*: Array<ParseObject>*/) /*: Promise<void>*/\n  {\n    var _this = this;\n    return (0, _asyncToGenerator2.default)(/*#__PURE__*/_regenerator.default.mark(function _callee() {\n      var _context;\n      var pinName, toPinPromises, objectKeys, _iterator, _step, parent, children, parentKey, json, objectKey, fromPinPromise, _yield$Promise$all, _yield$Promise$all2, pinned, toPin;\n      return _regenerator.default.wrap(function (_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              pinName = _this.getPinName(name);\n              toPinPromises = [];\n              objectKeys = [];\n              _iterator = _createForOfIteratorHelper(objects);\n              try {\n                for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                  parent = _step.value;\n                  children = _this._getChildren(parent);\n                  parentKey = _this.getKeyForObject(parent);\n                  json = parent._toFullJSON(undefined, true);\n                  if (parent._localId) {\n                    json._localId = parent._localId;\n                  }\n                  children[parentKey] = json;\n                  for (objectKey in children) {\n                    objectKeys.push(objectKey);\n                    toPinPromises.push(_this.pinWithName(objectKey, [children[objectKey]]));\n                  }\n                }\n              } catch (err) {\n                _iterator.e(err);\n              } finally {\n                _iterator.f();\n              }\n              fromPinPromise = _this.fromPinWithName(pinName);\n              _context2.next = 8;\n              return _promise.default.all([fromPinPromise, toPinPromises]);\n            case 8:\n              _yield$Promise$all = _context2.sent;\n              _yield$Promise$all2 = (0, _slicedToArray2.default)(_yield$Promise$all, 1);\n              pinned = _yield$Promise$all2[0];\n              toPin = (0, _toConsumableArray2.default)(new _set.default((0, _concat.default)(_context = []).call(_context, (0, _toConsumableArray2.default)(pinned || []), objectKeys)));\n              return _context2.abrupt(\"return\", _this.pinWithName(pinName, toPin));\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  // Removes object and children keys from pin name\n  // Keeps the object and children pinned\n  _handleUnPinAllWithName: function (name\n  /*: string*/, objects\n  /*: Array<ParseObject>*/) {\n    var _this2 = this;\n    return (0, _asyncToGenerator2.default)(/*#__PURE__*/_regenerator.default.mark(function _callee2() {\n      var localDatastore, pinName, promises, objectKeys, _iterator2, _step2, _objectKeys, _context3, parent, children, parentKey, pinned, _iterator3, _step3, objectKey, hasReference, key, pinnedObjects;\n      return _regenerator.default.wrap(function (_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return _this2._getAllContents();\n            case 2:\n              localDatastore = _context4.sent;\n              pinName = _this2.getPinName(name);\n              promises = [];\n              objectKeys = [];\n              _iterator2 = _createForOfIteratorHelper(objects);\n              try {\n                for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                  parent = _step2.value;\n                  children = _this2._getChildren(parent);\n                  parentKey = _this2.getKeyForObject(parent);\n                  (_objectKeys = objectKeys).push.apply(_objectKeys, (0, _concat.default)(_context3 = [parentKey]).call(_context3, (0, _toConsumableArray2.default)((0, _keys3.default)(children))));\n                }\n              } catch (err) {\n                _iterator2.e(err);\n              } finally {\n                _iterator2.f();\n              }\n              objectKeys = (0, _toConsumableArray2.default)(new _set.default(objectKeys));\n              pinned = localDatastore[pinName] || [];\n              pinned = (0, _filter.default)(pinned).call(pinned, function (item) {\n                return !(0, _includes.default)(objectKeys).call(objectKeys, item);\n              });\n              if (pinned.length == 0) {\n                promises.push(_this2.unPinWithName(pinName));\n                delete localDatastore[pinName];\n              } else {\n                promises.push(_this2.pinWithName(pinName, pinned));\n                localDatastore[pinName] = pinned;\n              }\n              _iterator3 = _createForOfIteratorHelper(objectKeys);\n              _context4.prev = 13;\n              _iterator3.s();\n            case 15:\n              if ((_step3 = _iterator3.n()).done) {\n                _context4.next = 31;\n                break;\n              }\n              objectKey = _step3.value;\n              hasReference = false;\n              _context4.t0 = (0, _keys2.default)(_regenerator.default).call(_regenerator.default, localDatastore);\n            case 19:\n              if ((_context4.t1 = _context4.t0()).done) {\n                _context4.next = 28;\n                break;\n              }\n              key = _context4.t1.value;\n              if (!(key === _LocalDatastoreUtils.DEFAULT_PIN || (0, _startsWith.default)(key).call(key, _LocalDatastoreUtils.PIN_PREFIX))) {\n                _context4.next = 26;\n                break;\n              }\n              pinnedObjects = localDatastore[key] || [];\n              if (!(0, _includes.default)(pinnedObjects).call(pinnedObjects, objectKey)) {\n                _context4.next = 26;\n                break;\n              }\n              hasReference = true;\n              return _context4.abrupt(\"break\", 28);\n            case 26:\n              _context4.next = 19;\n              break;\n            case 28:\n              if (!hasReference) {\n                promises.push(_this2.unPinWithName(objectKey));\n              }\n            case 29:\n              _context4.next = 15;\n              break;\n            case 31:\n              _context4.next = 36;\n              break;\n            case 33:\n              _context4.prev = 33;\n              _context4.t2 = _context4[\"catch\"](13);\n              _iterator3.e(_context4.t2);\n            case 36:\n              _context4.prev = 36;\n              _iterator3.f();\n              return _context4.finish(36);\n            case 39:\n              return _context4.abrupt(\"return\", _promise.default.all(promises));\n            case 40:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee2, null, [[13, 33, 36, 39]]);\n    }))();\n  },\n  // Retrieve all pointer fields from object recursively\n  _getChildren: function (object\n  /*: ParseObject*/) {\n    var encountered = {};\n    var json = object._toFullJSON(undefined, true);\n    for (var key in json) {\n      if (json[key] && json[key].__type && json[key].__type === 'Object') {\n        this._traverse(json[key], encountered);\n      }\n    }\n    return encountered;\n  },\n  _traverse: function (object\n  /*: any*/, encountered\n  /*: any*/) {\n    if (!object.objectId) {\n      return;\n    } else {\n      var objectKey = this.getKeyForObject(object);\n      if (encountered[objectKey]) {\n        return;\n      }\n      encountered[objectKey] = object;\n    }\n    for (var key in object) {\n      var json = object[key];\n      if (!object[key]) {\n        json = object;\n      }\n      if (json.__type && json.__type === 'Object') {\n        this._traverse(json, encountered);\n      }\n    }\n  },\n  // Transform keys in pin name to objects\n  _serializeObjectsFromPinName: function (name\n  /*: string*/) {\n    var _this3 = this;\n    return (0, _asyncToGenerator2.default)(/*#__PURE__*/_regenerator.default.mark(function _callee3() {\n      var _context5, _concatInstanceProper, _context6;\n      var localDatastore, allObjects, key, pinName, pinned, promises, objects;\n      return _regenerator.default.wrap(function (_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.next = 2;\n              return _this3._getAllContents();\n            case 2:\n              localDatastore = _context7.sent;\n              allObjects = [];\n              for (key in localDatastore) {\n                if ((0, _startsWith.default)(key).call(key, _LocalDatastoreUtils.OBJECT_PREFIX)) {\n                  allObjects.push(localDatastore[key][0]);\n                }\n              }\n              if (name) {\n                _context7.next = 7;\n                break;\n              }\n              return _context7.abrupt(\"return\", allObjects);\n            case 7:\n              pinName = _this3.getPinName(name);\n              pinned = localDatastore[pinName];\n              if ((0, _isArray.default)(pinned)) {\n                _context7.next = 11;\n                break;\n              }\n              return _context7.abrupt(\"return\", []);\n            case 11:\n              promises = (0, _map.default)(pinned).call(pinned, function (objectKey) {\n                return _this3.fromPinWithName(objectKey);\n              });\n              _context7.next = 14;\n              return _promise.default.all(promises);\n            case 14:\n              objects = _context7.sent;\n              objects = (_concatInstanceProper = (0, _concat.default)(_context5 = [])).call.apply(_concatInstanceProper, (0, _concat.default)(_context6 = [_context5]).call(_context6, (0, _toConsumableArray2.default)(objects)));\n              return _context7.abrupt(\"return\", (0, _filter.default)(objects).call(objects, function (object) {\n                return object != null;\n              }));\n            case 17:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee3);\n    }))();\n  },\n  // Replaces object pointers with pinned pointers\n  // The object pointers may contain old data\n  // Uses Breadth First Search Algorithm\n  _serializeObject: function (objectKey\n  /*: string*/, localDatastore\n  /*: any*/) {\n    var _this4 = this;\n    return (0, _asyncToGenerator2.default)(/*#__PURE__*/_regenerator.default.mark(function _callee4() {\n      var LDS, root, queue, meta, uniqueId, nodeId, subTreeRoot, field, value, key, pointer;\n      return _regenerator.default.wrap(function (_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              LDS = localDatastore;\n              if (LDS) {\n                _context8.next = 5;\n                break;\n              }\n              _context8.next = 4;\n              return _this4._getAllContents();\n            case 4:\n              LDS = _context8.sent;\n            case 5:\n              if (!(!LDS[objectKey] || LDS[objectKey].length === 0)) {\n                _context8.next = 7;\n                break;\n              }\n              return _context8.abrupt(\"return\", null);\n            case 7:\n              root = LDS[objectKey][0];\n              queue = [];\n              meta = {};\n              uniqueId = 0;\n              meta[uniqueId] = root;\n              queue.push(uniqueId);\n              while (queue.length !== 0) {\n                nodeId = queue.shift();\n                subTreeRoot = meta[nodeId];\n                for (field in subTreeRoot) {\n                  value = subTreeRoot[field];\n                  if (value.__type && value.__type === 'Object') {\n                    key = _this4.getKeyForObject(value);\n                    if (LDS[key] && LDS[key].length > 0) {\n                      pointer = LDS[key][0];\n                      uniqueId++;\n                      meta[uniqueId] = pointer;\n                      subTreeRoot[field] = pointer;\n                      queue.push(uniqueId);\n                    }\n                  }\n                }\n              }\n              return _context8.abrupt(\"return\", root);\n            case 15:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee4);\n    }))();\n  },\n  // Called when an object is save / fetched\n  // Update object pin value\n  _updateObjectIfPinned: function (object\n  /*: ParseObject*/) /*: Promise<void>*/\n  {\n    var _this5 = this;\n    return (0, _asyncToGenerator2.default)(/*#__PURE__*/_regenerator.default.mark(function _callee5() {\n      var objectKey, pinned;\n      return _regenerator.default.wrap(function (_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              if (_this5.isEnabled) {\n                _context9.next = 2;\n                break;\n              }\n              return _context9.abrupt(\"return\");\n            case 2:\n              objectKey = _this5.getKeyForObject(object);\n              _context9.next = 5;\n              return _this5.fromPinWithName(objectKey);\n            case 5:\n              pinned = _context9.sent;\n              if (!(!pinned || pinned.length === 0)) {\n                _context9.next = 8;\n                break;\n              }\n              return _context9.abrupt(\"return\");\n            case 8:\n              return _context9.abrupt(\"return\", _this5.pinWithName(objectKey, [object._toFullJSON()]));\n            case 9:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee5);\n    }))();\n  },\n  // Called when object is destroyed\n  // Unpin object and remove all references from pin names\n  // TODO: Destroy children?\n  _destroyObjectIfPinned: function (object\n  /*: ParseObject*/) {\n    var _this6 = this;\n    return (0, _asyncToGenerator2.default)(/*#__PURE__*/_regenerator.default.mark(function _callee6() {\n      var localDatastore, objectKey, pin, promises, key, pinned;\n      return _regenerator.default.wrap(function (_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              if (_this6.isEnabled) {\n                _context10.next = 2;\n                break;\n              }\n              return _context10.abrupt(\"return\");\n            case 2:\n              _context10.next = 4;\n              return _this6._getAllContents();\n            case 4:\n              localDatastore = _context10.sent;\n              objectKey = _this6.getKeyForObject(object);\n              pin = localDatastore[objectKey];\n              if (pin) {\n                _context10.next = 9;\n                break;\n              }\n              return _context10.abrupt(\"return\");\n            case 9:\n              promises = [_this6.unPinWithName(objectKey)];\n              delete localDatastore[objectKey];\n              for (key in localDatastore) {\n                if (key === _LocalDatastoreUtils.DEFAULT_PIN || (0, _startsWith.default)(key).call(key, _LocalDatastoreUtils.PIN_PREFIX)) {\n                  pinned = localDatastore[key] || [];\n                  if ((0, _includes.default)(pinned).call(pinned, objectKey)) {\n                    pinned = (0, _filter.default)(pinned).call(pinned, function (item) {\n                      return item !== objectKey;\n                    });\n                    if (pinned.length == 0) {\n                      promises.push(_this6.unPinWithName(key));\n                      delete localDatastore[key];\n                    } else {\n                      promises.push(_this6.pinWithName(key, pinned));\n                      localDatastore[key] = pinned;\n                    }\n                  }\n                }\n              }\n              return _context10.abrupt(\"return\", _promise.default.all(promises));\n            case 13:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee6);\n    }))();\n  },\n  // Update pin and references of the unsaved object\n  _updateLocalIdForObject: function (localId\n  /*: string*/, object\n  /*: ParseObject*/) {\n    var _this7 = this;\n    return (0, _asyncToGenerator2.default)(/*#__PURE__*/_regenerator.default.mark(function _callee7() {\n      var _context11, _context12;\n      var localKey, objectKey, unsaved, promises, localDatastore, key, pinned;\n      return _regenerator.default.wrap(function (_context13) {\n        while (1) {\n          switch (_context13.prev = _context13.next) {\n            case 0:\n              if (_this7.isEnabled) {\n                _context13.next = 2;\n                break;\n              }\n              return _context13.abrupt(\"return\");\n            case 2:\n              localKey = (0, _concat.default)(_context11 = (0, _concat.default)(_context12 = \"\".concat(_LocalDatastoreUtils.OBJECT_PREFIX)).call(_context12, object.className, \"_\")).call(_context11, localId);\n              objectKey = _this7.getKeyForObject(object);\n              _context13.next = 6;\n              return _this7.fromPinWithName(localKey);\n            case 6:\n              unsaved = _context13.sent;\n              if (!(!unsaved || unsaved.length === 0)) {\n                _context13.next = 9;\n                break;\n              }\n              return _context13.abrupt(\"return\");\n            case 9:\n              promises = [_this7.unPinWithName(localKey), _this7.pinWithName(objectKey, unsaved)];\n              _context13.next = 12;\n              return _this7._getAllContents();\n            case 12:\n              localDatastore = _context13.sent;\n              for (key in localDatastore) {\n                if (key === _LocalDatastoreUtils.DEFAULT_PIN || (0, _startsWith.default)(key).call(key, _LocalDatastoreUtils.PIN_PREFIX)) {\n                  pinned = localDatastore[key] || [];\n                  if ((0, _includes.default)(pinned).call(pinned, localKey)) {\n                    pinned = (0, _filter.default)(pinned).call(pinned, function (item) {\n                      return item !== localKey;\n                    });\n                    pinned.push(objectKey);\n                    promises.push(_this7.pinWithName(key, pinned));\n                    localDatastore[key] = pinned;\n                  }\n                }\n              }\n              return _context13.abrupt(\"return\", _promise.default.all(promises));\n            case 15:\n            case \"end\":\n              return _context13.stop();\n          }\n        }\n      }, _callee7);\n    }))();\n  },\n  /**\n   * Updates Local Datastore from Server\n   *\n   * <pre>\n   * await Parse.LocalDatastore.updateFromServer();\n   * </pre>\n   *\n   * @function updateFromServer\n   * @name Parse.LocalDatastore.updateFromServer\n   * @static\n   */\n  updateFromServer: function () {\n    var _this8 = this;\n    return (0, _asyncToGenerator2.default)(/*#__PURE__*/_regenerator.default.mark(function _callee8() {\n      var _context14;\n      var localDatastore, keys, key, pointersHash, _i, _keys, _key, _key$split, _key$split2, className, objectId, queryPromises, responses, objects, pinPromises;\n      return _regenerator.default.wrap(function (_context15) {\n        while (1) {\n          switch (_context15.prev = _context15.next) {\n            case 0:\n              if (!(!_this8.checkIfEnabled() || _this8.isSyncing)) {\n                _context15.next = 2;\n                break;\n              }\n              return _context15.abrupt(\"return\");\n            case 2:\n              _context15.next = 4;\n              return _this8._getAllContents();\n            case 4:\n              localDatastore = _context15.sent;\n              keys = [];\n              for (key in localDatastore) {\n                if ((0, _startsWith.default)(key).call(key, _LocalDatastoreUtils.OBJECT_PREFIX)) {\n                  keys.push(key);\n                }\n              }\n              if (!(keys.length === 0)) {\n                _context15.next = 9;\n                break;\n              }\n              return _context15.abrupt(\"return\");\n            case 9:\n              _this8.isSyncing = true;\n              pointersHash = {};\n              _i = 0, _keys = keys;\n            case 12:\n              if (!(_i < _keys.length)) {\n                _context15.next = 23;\n                break;\n              }\n              _key = _keys[_i]; // Ignore the OBJECT_PREFIX\n\n              _key$split = _key.split('_'), _key$split2 = (0, _slicedToArray2.default)(_key$split, 4), className = _key$split2[2], objectId = _key$split2[3]; // User key is split into [ 'Parse', 'LDS', '', 'User', 'objectId' ]\n\n              if (_key.split('_').length === 5 && _key.split('_')[3] === 'User') {\n                className = '_User';\n                objectId = _key.split('_')[4];\n              }\n              if (!(0, _startsWith.default)(objectId).call(objectId, 'local')) {\n                _context15.next = 18;\n                break;\n              }\n              return _context15.abrupt(\"continue\", 20);\n            case 18:\n              if (!(className in pointersHash)) {\n                pointersHash[className] = new _set.default();\n              }\n              pointersHash[className].add(objectId);\n            case 20:\n              _i++;\n              _context15.next = 12;\n              break;\n            case 23:\n              queryPromises = (0, _map.default)(_context14 = (0, _keys3.default)(pointersHash)).call(_context14, function (className) {\n                var objectIds = (0, _from.default)(pointersHash[className]);\n                var query = new _ParseQuery.default(className);\n                query.limit(objectIds.length);\n                if (objectIds.length === 1) {\n                  query.equalTo('objectId', objectIds[0]);\n                } else {\n                  query.containedIn('objectId', objectIds);\n                }\n                return (0, _find.default)(query).call(query);\n              });\n              _context15.prev = 24;\n              _context15.next = 27;\n              return _promise.default.all(queryPromises);\n            case 27:\n              responses = _context15.sent;\n              objects = (0, _concat.default)([]).apply([], responses);\n              pinPromises = (0, _map.default)(objects).call(objects, function (object) {\n                var objectKey = _this8.getKeyForObject(object);\n                return _this8.pinWithName(objectKey, object._toFullJSON());\n              });\n              _context15.next = 32;\n              return _promise.default.all(pinPromises);\n            case 32:\n              _this8.isSyncing = false;\n              _context15.next = 39;\n              break;\n            case 35:\n              _context15.prev = 35;\n              _context15.t0 = _context15[\"catch\"](24);\n              console.error('Error syncing LocalDatastore: ', _context15.t0);\n              _this8.isSyncing = false;\n            case 39:\n            case \"end\":\n              return _context15.stop();\n          }\n        }\n      }, _callee8, null, [[24, 35]]);\n    }))();\n  },\n  getKeyForObject: function (object\n  /*: any*/) {\n    var _context16, _context17;\n    var objectId = object.objectId || object._getId();\n    return (0, _concat.default)(_context16 = (0, _concat.default)(_context17 = \"\".concat(_LocalDatastoreUtils.OBJECT_PREFIX)).call(_context17, object.className, \"_\")).call(_context16, objectId);\n  },\n  getPinName: function (pinName\n  /*: ?string*/) {\n    if (!pinName || pinName === _LocalDatastoreUtils.DEFAULT_PIN) {\n      return _LocalDatastoreUtils.DEFAULT_PIN;\n    }\n    return _LocalDatastoreUtils.PIN_PREFIX + pinName;\n  },\n  checkIfEnabled: function () {\n    if (!this.isEnabled) {\n      console.error('Parse.enableLocalDatastore() must be called first');\n    }\n    return this.isEnabled;\n  }\n};\nmodule.exports = LocalDatastore;\n_CoreManager.default.setLocalDatastoreController(require('./LocalDatastoreController'));\n_CoreManager.default.setLocalDatastore(LocalDatastore);","map":{"version":3,"names":["_interopRequireDefault","require","_getIterator","_Array$isArray2","_getIteratorMethod","_Symbol","_Array$from2","_sliceInstanceProperty","_find","_from","_map","_isArray","_keys2","_startsWith","_keys3","_includes","_filter","_regenerator","_concat","_set","_toConsumableArray2","_promise","_slicedToArray2","_asyncToGenerator2","_CoreManager","_ParseQuery","_LocalDatastoreUtils","_createForOfIteratorHelper","o","allowArrayLike","it","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","return","minLen","_context18","_arrayLikeToArray","Object","prototype","toString","call","constructor","name","test","arr","len","arr2","Array","LocalDatastore","isEnabled","isSyncing","fromPinWithName","controller","default","getLocalDatastoreController","pinWithName","unPinWithName","_getAllContents","getAllContents","_getRawStorage","getRawStorage","_clear","clear","_handlePinAllWithName","objects","_this","mark","_callee","_context","pinName","toPinPromises","objectKeys","_iterator","_step","parent","children","parentKey","json","objectKey","fromPinPromise","_yield$Promise$all","_yield$Promise$all2","pinned","toPin","wrap","_context2","prev","getPinName","_getChildren","getKeyForObject","_toFullJSON","undefined","_localId","push","all","sent","abrupt","stop","_handleUnPinAllWithName","_this2","_callee2","localDatastore","promises","_iterator2","_step2","_objectKeys","_context3","_iterator3","_step3","hasReference","key","pinnedObjects","_context4","apply","item","t0","t1","DEFAULT_PIN","PIN_PREFIX","t2","finish","object","encountered","__type","_traverse","objectId","_serializeObjectsFromPinName","_this3","_callee3","_context5","_concatInstanceProper","_context6","allObjects","_context7","OBJECT_PREFIX","_serializeObject","_this4","_callee4","LDS","root","queue","meta","uniqueId","nodeId","subTreeRoot","field","pointer","_context8","shift","_updateObjectIfPinned","_this5","_callee5","_context9","_destroyObjectIfPinned","_this6","_callee6","pin","_context10","_updateLocalIdForObject","localId","_this7","_callee7","_context11","_context12","localKey","unsaved","_context13","concat","className","updateFromServer","_this8","_callee8","_context14","keys","pointersHash","_i","_keys","_key","_key$split","_key$split2","queryPromises","responses","pinPromises","_context15","checkIfEnabled","split","add","objectIds","query","limit","equalTo","containedIn","console","error","_context16","_context17","_getId","module","exports","setLocalDatastoreController","setLocalDatastore"],"sources":["C:/Users/chtdu/Documents/WEB DEV/git-repo/react-webpack8/node_modules/parse/lib/browser/LocalDatastore.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _getIterator = require(\"@babel/runtime-corejs3/core-js/get-iterator\");\n\nvar _Array$isArray2 = require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\");\n\nvar _getIteratorMethod = require(\"@babel/runtime-corejs3/core-js/get-iterator-method\");\n\nvar _Symbol = require(\"@babel/runtime-corejs3/core-js-stable/symbol\");\n\nvar _Array$from2 = require(\"@babel/runtime-corejs3/core-js-stable/array/from\");\n\nvar _sliceInstanceProperty = require(\"@babel/runtime-corejs3/core-js-stable/instance/slice\");\n\nvar _find = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/find\"));\n\nvar _from = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/array/from\"));\n\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\n\nvar _isArray = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\"));\n\nvar _keys2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/keys\"));\n\nvar _startsWith = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/starts-with\"));\n\nvar _keys3 = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/keys\"));\n\nvar _includes = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/includes\"));\n\nvar _filter = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/filter\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\n\nvar _set = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/set\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/toConsumableArray\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/slicedToArray\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _CoreManager = _interopRequireDefault(require(\"./CoreManager\"));\n\nvar _ParseQuery = _interopRequireDefault(require(\"./ParseQuery\"));\n\nvar _LocalDatastoreUtils = require(\"./LocalDatastoreUtils\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof _Symbol === \"undefined\" || _getIteratorMethod(o) == null) {\n    if (_Array$isArray2(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function () {};\n\n      return {\n        s: F,\n        n: function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function () {\n      it = _getIterator(o);\n    },\n    n: function () {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function () {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  var _context18;\n\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n\n  var n = _sliceInstanceProperty(_context18 = Object.prototype.toString.call(o)).call(_context18, 8, -1);\n\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return _Array$from2(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n/**\n * Provides a local datastore which can be used to store and retrieve <code>Parse.Object</code>. <br />\n * To enable this functionality, call <code>Parse.enableLocalDatastore()</code>.\n *\n * Pin object to add to local datastore\n *\n * <pre>await object.pin();</pre>\n * <pre>await object.pinWithName('pinName');</pre>\n *\n * Query pinned objects\n *\n * <pre>query.fromLocalDatastore();</pre>\n * <pre>query.fromPin();</pre>\n * <pre>query.fromPinWithName();</pre>\n *\n * <pre>const localObjects = await query.find();</pre>\n *\n * @class Parse.LocalDatastore\n * @static\n */\n\n\nvar LocalDatastore = {\n  isEnabled: false,\n  isSyncing: false,\n  fromPinWithName: function (name\n  /*: string*/\n  )\n  /*: Promise<Array<Object>>*/\n  {\n    var controller = _CoreManager.default.getLocalDatastoreController();\n\n    return controller.fromPinWithName(name);\n  },\n  pinWithName: function (name\n  /*: string*/\n  , value\n  /*: any*/\n  )\n  /*: Promise<void>*/\n  {\n    var controller = _CoreManager.default.getLocalDatastoreController();\n\n    return controller.pinWithName(name, value);\n  },\n  unPinWithName: function (name\n  /*: string*/\n  )\n  /*: Promise<void>*/\n  {\n    var controller = _CoreManager.default.getLocalDatastoreController();\n\n    return controller.unPinWithName(name);\n  },\n  _getAllContents: function ()\n  /*: Promise<Object>*/\n  {\n    var controller = _CoreManager.default.getLocalDatastoreController();\n\n    return controller.getAllContents();\n  },\n  // Use for testing\n  _getRawStorage: function ()\n  /*: Promise<Object>*/\n  {\n    var controller = _CoreManager.default.getLocalDatastoreController();\n\n    return controller.getRawStorage();\n  },\n  _clear: function ()\n  /*: Promise<void>*/\n  {\n    var controller = _CoreManager.default.getLocalDatastoreController();\n\n    return controller.clear();\n  },\n  // Pin the object and children recursively\n  // Saves the object and children key to Pin Name\n  _handlePinAllWithName: function (name\n  /*: string*/\n  , objects\n  /*: Array<ParseObject>*/\n  )\n  /*: Promise<void>*/\n  {\n    var _this = this;\n\n    return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {\n      var _context;\n\n      var pinName, toPinPromises, objectKeys, _iterator, _step, parent, children, parentKey, json, objectKey, fromPinPromise, _yield$Promise$all, _yield$Promise$all2, pinned, toPin;\n\n      return _regenerator.default.wrap(function (_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              pinName = _this.getPinName(name);\n              toPinPromises = [];\n              objectKeys = [];\n              _iterator = _createForOfIteratorHelper(objects);\n\n              try {\n                for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                  parent = _step.value;\n                  children = _this._getChildren(parent);\n                  parentKey = _this.getKeyForObject(parent);\n                  json = parent._toFullJSON(undefined, true);\n\n                  if (parent._localId) {\n                    json._localId = parent._localId;\n                  }\n\n                  children[parentKey] = json;\n\n                  for (objectKey in children) {\n                    objectKeys.push(objectKey);\n                    toPinPromises.push(_this.pinWithName(objectKey, [children[objectKey]]));\n                  }\n                }\n              } catch (err) {\n                _iterator.e(err);\n              } finally {\n                _iterator.f();\n              }\n\n              fromPinPromise = _this.fromPinWithName(pinName);\n              _context2.next = 8;\n              return _promise.default.all([fromPinPromise, toPinPromises]);\n\n            case 8:\n              _yield$Promise$all = _context2.sent;\n              _yield$Promise$all2 = (0, _slicedToArray2.default)(_yield$Promise$all, 1);\n              pinned = _yield$Promise$all2[0];\n              toPin = (0, _toConsumableArray2.default)(new _set.default((0, _concat.default)(_context = []).call(_context, (0, _toConsumableArray2.default)(pinned || []), objectKeys)));\n              return _context2.abrupt(\"return\", _this.pinWithName(pinName, toPin));\n\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  // Removes object and children keys from pin name\n  // Keeps the object and children pinned\n  _handleUnPinAllWithName: function (name\n  /*: string*/\n  , objects\n  /*: Array<ParseObject>*/\n  ) {\n    var _this2 = this;\n\n    return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n      var localDatastore, pinName, promises, objectKeys, _iterator2, _step2, _objectKeys, _context3, parent, children, parentKey, pinned, _iterator3, _step3, objectKey, hasReference, key, pinnedObjects;\n\n      return _regenerator.default.wrap(function (_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return _this2._getAllContents();\n\n            case 2:\n              localDatastore = _context4.sent;\n              pinName = _this2.getPinName(name);\n              promises = [];\n              objectKeys = [];\n              _iterator2 = _createForOfIteratorHelper(objects);\n\n              try {\n                for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                  parent = _step2.value;\n                  children = _this2._getChildren(parent);\n                  parentKey = _this2.getKeyForObject(parent);\n\n                  (_objectKeys = objectKeys).push.apply(_objectKeys, (0, _concat.default)(_context3 = [parentKey]).call(_context3, (0, _toConsumableArray2.default)((0, _keys3.default)(children))));\n                }\n              } catch (err) {\n                _iterator2.e(err);\n              } finally {\n                _iterator2.f();\n              }\n\n              objectKeys = (0, _toConsumableArray2.default)(new _set.default(objectKeys));\n              pinned = localDatastore[pinName] || [];\n              pinned = (0, _filter.default)(pinned).call(pinned, function (item) {\n                return !(0, _includes.default)(objectKeys).call(objectKeys, item);\n              });\n\n              if (pinned.length == 0) {\n                promises.push(_this2.unPinWithName(pinName));\n                delete localDatastore[pinName];\n              } else {\n                promises.push(_this2.pinWithName(pinName, pinned));\n                localDatastore[pinName] = pinned;\n              }\n\n              _iterator3 = _createForOfIteratorHelper(objectKeys);\n              _context4.prev = 13;\n\n              _iterator3.s();\n\n            case 15:\n              if ((_step3 = _iterator3.n()).done) {\n                _context4.next = 31;\n                break;\n              }\n\n              objectKey = _step3.value;\n              hasReference = false;\n              _context4.t0 = (0, _keys2.default)(_regenerator.default).call(_regenerator.default, localDatastore);\n\n            case 19:\n              if ((_context4.t1 = _context4.t0()).done) {\n                _context4.next = 28;\n                break;\n              }\n\n              key = _context4.t1.value;\n\n              if (!(key === _LocalDatastoreUtils.DEFAULT_PIN || (0, _startsWith.default)(key).call(key, _LocalDatastoreUtils.PIN_PREFIX))) {\n                _context4.next = 26;\n                break;\n              }\n\n              pinnedObjects = localDatastore[key] || [];\n\n              if (!(0, _includes.default)(pinnedObjects).call(pinnedObjects, objectKey)) {\n                _context4.next = 26;\n                break;\n              }\n\n              hasReference = true;\n              return _context4.abrupt(\"break\", 28);\n\n            case 26:\n              _context4.next = 19;\n              break;\n\n            case 28:\n              if (!hasReference) {\n                promises.push(_this2.unPinWithName(objectKey));\n              }\n\n            case 29:\n              _context4.next = 15;\n              break;\n\n            case 31:\n              _context4.next = 36;\n              break;\n\n            case 33:\n              _context4.prev = 33;\n              _context4.t2 = _context4[\"catch\"](13);\n\n              _iterator3.e(_context4.t2);\n\n            case 36:\n              _context4.prev = 36;\n\n              _iterator3.f();\n\n              return _context4.finish(36);\n\n            case 39:\n              return _context4.abrupt(\"return\", _promise.default.all(promises));\n\n            case 40:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee2, null, [[13, 33, 36, 39]]);\n    }))();\n  },\n  // Retrieve all pointer fields from object recursively\n  _getChildren: function (object\n  /*: ParseObject*/\n  ) {\n    var encountered = {};\n\n    var json = object._toFullJSON(undefined, true);\n\n    for (var key in json) {\n      if (json[key] && json[key].__type && json[key].__type === 'Object') {\n        this._traverse(json[key], encountered);\n      }\n    }\n\n    return encountered;\n  },\n  _traverse: function (object\n  /*: any*/\n  , encountered\n  /*: any*/\n  ) {\n    if (!object.objectId) {\n      return;\n    } else {\n      var objectKey = this.getKeyForObject(object);\n\n      if (encountered[objectKey]) {\n        return;\n      }\n\n      encountered[objectKey] = object;\n    }\n\n    for (var key in object) {\n      var json = object[key];\n\n      if (!object[key]) {\n        json = object;\n      }\n\n      if (json.__type && json.__type === 'Object') {\n        this._traverse(json, encountered);\n      }\n    }\n  },\n  // Transform keys in pin name to objects\n  _serializeObjectsFromPinName: function (name\n  /*: string*/\n  ) {\n    var _this3 = this;\n\n    return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3() {\n      var _context5, _concatInstanceProper, _context6;\n\n      var localDatastore, allObjects, key, pinName, pinned, promises, objects;\n      return _regenerator.default.wrap(function (_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.next = 2;\n              return _this3._getAllContents();\n\n            case 2:\n              localDatastore = _context7.sent;\n              allObjects = [];\n\n              for (key in localDatastore) {\n                if ((0, _startsWith.default)(key).call(key, _LocalDatastoreUtils.OBJECT_PREFIX)) {\n                  allObjects.push(localDatastore[key][0]);\n                }\n              }\n\n              if (name) {\n                _context7.next = 7;\n                break;\n              }\n\n              return _context7.abrupt(\"return\", allObjects);\n\n            case 7:\n              pinName = _this3.getPinName(name);\n              pinned = localDatastore[pinName];\n\n              if ((0, _isArray.default)(pinned)) {\n                _context7.next = 11;\n                break;\n              }\n\n              return _context7.abrupt(\"return\", []);\n\n            case 11:\n              promises = (0, _map.default)(pinned).call(pinned, function (objectKey) {\n                return _this3.fromPinWithName(objectKey);\n              });\n              _context7.next = 14;\n              return _promise.default.all(promises);\n\n            case 14:\n              objects = _context7.sent;\n              objects = (_concatInstanceProper = (0, _concat.default)(_context5 = [])).call.apply(_concatInstanceProper, (0, _concat.default)(_context6 = [_context5]).call(_context6, (0, _toConsumableArray2.default)(objects)));\n              return _context7.abrupt(\"return\", (0, _filter.default)(objects).call(objects, function (object) {\n                return object != null;\n              }));\n\n            case 17:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee3);\n    }))();\n  },\n  // Replaces object pointers with pinned pointers\n  // The object pointers may contain old data\n  // Uses Breadth First Search Algorithm\n  _serializeObject: function (objectKey\n  /*: string*/\n  , localDatastore\n  /*: any*/\n  ) {\n    var _this4 = this;\n\n    return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4() {\n      var LDS, root, queue, meta, uniqueId, nodeId, subTreeRoot, field, value, key, pointer;\n      return _regenerator.default.wrap(function (_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              LDS = localDatastore;\n\n              if (LDS) {\n                _context8.next = 5;\n                break;\n              }\n\n              _context8.next = 4;\n              return _this4._getAllContents();\n\n            case 4:\n              LDS = _context8.sent;\n\n            case 5:\n              if (!(!LDS[objectKey] || LDS[objectKey].length === 0)) {\n                _context8.next = 7;\n                break;\n              }\n\n              return _context8.abrupt(\"return\", null);\n\n            case 7:\n              root = LDS[objectKey][0];\n              queue = [];\n              meta = {};\n              uniqueId = 0;\n              meta[uniqueId] = root;\n              queue.push(uniqueId);\n\n              while (queue.length !== 0) {\n                nodeId = queue.shift();\n                subTreeRoot = meta[nodeId];\n\n                for (field in subTreeRoot) {\n                  value = subTreeRoot[field];\n\n                  if (value.__type && value.__type === 'Object') {\n                    key = _this4.getKeyForObject(value);\n\n                    if (LDS[key] && LDS[key].length > 0) {\n                      pointer = LDS[key][0];\n                      uniqueId++;\n                      meta[uniqueId] = pointer;\n                      subTreeRoot[field] = pointer;\n                      queue.push(uniqueId);\n                    }\n                  }\n                }\n              }\n\n              return _context8.abrupt(\"return\", root);\n\n            case 15:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee4);\n    }))();\n  },\n  // Called when an object is save / fetched\n  // Update object pin value\n  _updateObjectIfPinned: function (object\n  /*: ParseObject*/\n  )\n  /*: Promise<void>*/\n  {\n    var _this5 = this;\n\n    return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5() {\n      var objectKey, pinned;\n      return _regenerator.default.wrap(function (_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              if (_this5.isEnabled) {\n                _context9.next = 2;\n                break;\n              }\n\n              return _context9.abrupt(\"return\");\n\n            case 2:\n              objectKey = _this5.getKeyForObject(object);\n              _context9.next = 5;\n              return _this5.fromPinWithName(objectKey);\n\n            case 5:\n              pinned = _context9.sent;\n\n              if (!(!pinned || pinned.length === 0)) {\n                _context9.next = 8;\n                break;\n              }\n\n              return _context9.abrupt(\"return\");\n\n            case 8:\n              return _context9.abrupt(\"return\", _this5.pinWithName(objectKey, [object._toFullJSON()]));\n\n            case 9:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee5);\n    }))();\n  },\n  // Called when object is destroyed\n  // Unpin object and remove all references from pin names\n  // TODO: Destroy children?\n  _destroyObjectIfPinned: function (object\n  /*: ParseObject*/\n  ) {\n    var _this6 = this;\n\n    return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee6() {\n      var localDatastore, objectKey, pin, promises, key, pinned;\n      return _regenerator.default.wrap(function (_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              if (_this6.isEnabled) {\n                _context10.next = 2;\n                break;\n              }\n\n              return _context10.abrupt(\"return\");\n\n            case 2:\n              _context10.next = 4;\n              return _this6._getAllContents();\n\n            case 4:\n              localDatastore = _context10.sent;\n              objectKey = _this6.getKeyForObject(object);\n              pin = localDatastore[objectKey];\n\n              if (pin) {\n                _context10.next = 9;\n                break;\n              }\n\n              return _context10.abrupt(\"return\");\n\n            case 9:\n              promises = [_this6.unPinWithName(objectKey)];\n              delete localDatastore[objectKey];\n\n              for (key in localDatastore) {\n                if (key === _LocalDatastoreUtils.DEFAULT_PIN || (0, _startsWith.default)(key).call(key, _LocalDatastoreUtils.PIN_PREFIX)) {\n                  pinned = localDatastore[key] || [];\n\n                  if ((0, _includes.default)(pinned).call(pinned, objectKey)) {\n                    pinned = (0, _filter.default)(pinned).call(pinned, function (item) {\n                      return item !== objectKey;\n                    });\n\n                    if (pinned.length == 0) {\n                      promises.push(_this6.unPinWithName(key));\n                      delete localDatastore[key];\n                    } else {\n                      promises.push(_this6.pinWithName(key, pinned));\n                      localDatastore[key] = pinned;\n                    }\n                  }\n                }\n              }\n\n              return _context10.abrupt(\"return\", _promise.default.all(promises));\n\n            case 13:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee6);\n    }))();\n  },\n  // Update pin and references of the unsaved object\n  _updateLocalIdForObject: function (localId\n  /*: string*/\n  , object\n  /*: ParseObject*/\n  ) {\n    var _this7 = this;\n\n    return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee7() {\n      var _context11, _context12;\n\n      var localKey, objectKey, unsaved, promises, localDatastore, key, pinned;\n      return _regenerator.default.wrap(function (_context13) {\n        while (1) {\n          switch (_context13.prev = _context13.next) {\n            case 0:\n              if (_this7.isEnabled) {\n                _context13.next = 2;\n                break;\n              }\n\n              return _context13.abrupt(\"return\");\n\n            case 2:\n              localKey = (0, _concat.default)(_context11 = (0, _concat.default)(_context12 = \"\".concat(_LocalDatastoreUtils.OBJECT_PREFIX)).call(_context12, object.className, \"_\")).call(_context11, localId);\n              objectKey = _this7.getKeyForObject(object);\n              _context13.next = 6;\n              return _this7.fromPinWithName(localKey);\n\n            case 6:\n              unsaved = _context13.sent;\n\n              if (!(!unsaved || unsaved.length === 0)) {\n                _context13.next = 9;\n                break;\n              }\n\n              return _context13.abrupt(\"return\");\n\n            case 9:\n              promises = [_this7.unPinWithName(localKey), _this7.pinWithName(objectKey, unsaved)];\n              _context13.next = 12;\n              return _this7._getAllContents();\n\n            case 12:\n              localDatastore = _context13.sent;\n\n              for (key in localDatastore) {\n                if (key === _LocalDatastoreUtils.DEFAULT_PIN || (0, _startsWith.default)(key).call(key, _LocalDatastoreUtils.PIN_PREFIX)) {\n                  pinned = localDatastore[key] || [];\n\n                  if ((0, _includes.default)(pinned).call(pinned, localKey)) {\n                    pinned = (0, _filter.default)(pinned).call(pinned, function (item) {\n                      return item !== localKey;\n                    });\n                    pinned.push(objectKey);\n                    promises.push(_this7.pinWithName(key, pinned));\n                    localDatastore[key] = pinned;\n                  }\n                }\n              }\n\n              return _context13.abrupt(\"return\", _promise.default.all(promises));\n\n            case 15:\n            case \"end\":\n              return _context13.stop();\n          }\n        }\n      }, _callee7);\n    }))();\n  },\n\n  /**\n   * Updates Local Datastore from Server\n   *\n   * <pre>\n   * await Parse.LocalDatastore.updateFromServer();\n   * </pre>\n   *\n   * @function updateFromServer\n   * @name Parse.LocalDatastore.updateFromServer\n   * @static\n   */\n  updateFromServer: function () {\n    var _this8 = this;\n\n    return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee8() {\n      var _context14;\n\n      var localDatastore, keys, key, pointersHash, _i, _keys, _key, _key$split, _key$split2, className, objectId, queryPromises, responses, objects, pinPromises;\n\n      return _regenerator.default.wrap(function (_context15) {\n        while (1) {\n          switch (_context15.prev = _context15.next) {\n            case 0:\n              if (!(!_this8.checkIfEnabled() || _this8.isSyncing)) {\n                _context15.next = 2;\n                break;\n              }\n\n              return _context15.abrupt(\"return\");\n\n            case 2:\n              _context15.next = 4;\n              return _this8._getAllContents();\n\n            case 4:\n              localDatastore = _context15.sent;\n              keys = [];\n\n              for (key in localDatastore) {\n                if ((0, _startsWith.default)(key).call(key, _LocalDatastoreUtils.OBJECT_PREFIX)) {\n                  keys.push(key);\n                }\n              }\n\n              if (!(keys.length === 0)) {\n                _context15.next = 9;\n                break;\n              }\n\n              return _context15.abrupt(\"return\");\n\n            case 9:\n              _this8.isSyncing = true;\n              pointersHash = {};\n              _i = 0, _keys = keys;\n\n            case 12:\n              if (!(_i < _keys.length)) {\n                _context15.next = 23;\n                break;\n              }\n\n              _key = _keys[_i]; // Ignore the OBJECT_PREFIX\n\n              _key$split = _key.split('_'), _key$split2 = (0, _slicedToArray2.default)(_key$split, 4), className = _key$split2[2], objectId = _key$split2[3]; // User key is split into [ 'Parse', 'LDS', '', 'User', 'objectId' ]\n\n              if (_key.split('_').length === 5 && _key.split('_')[3] === 'User') {\n                className = '_User';\n                objectId = _key.split('_')[4];\n              }\n\n              if (!(0, _startsWith.default)(objectId).call(objectId, 'local')) {\n                _context15.next = 18;\n                break;\n              }\n\n              return _context15.abrupt(\"continue\", 20);\n\n            case 18:\n              if (!(className in pointersHash)) {\n                pointersHash[className] = new _set.default();\n              }\n\n              pointersHash[className].add(objectId);\n\n            case 20:\n              _i++;\n              _context15.next = 12;\n              break;\n\n            case 23:\n              queryPromises = (0, _map.default)(_context14 = (0, _keys3.default)(pointersHash)).call(_context14, function (className) {\n                var objectIds = (0, _from.default)(pointersHash[className]);\n                var query = new _ParseQuery.default(className);\n                query.limit(objectIds.length);\n\n                if (objectIds.length === 1) {\n                  query.equalTo('objectId', objectIds[0]);\n                } else {\n                  query.containedIn('objectId', objectIds);\n                }\n\n                return (0, _find.default)(query).call(query);\n              });\n              _context15.prev = 24;\n              _context15.next = 27;\n              return _promise.default.all(queryPromises);\n\n            case 27:\n              responses = _context15.sent;\n              objects = (0, _concat.default)([]).apply([], responses);\n              pinPromises = (0, _map.default)(objects).call(objects, function (object) {\n                var objectKey = _this8.getKeyForObject(object);\n\n                return _this8.pinWithName(objectKey, object._toFullJSON());\n              });\n              _context15.next = 32;\n              return _promise.default.all(pinPromises);\n\n            case 32:\n              _this8.isSyncing = false;\n              _context15.next = 39;\n              break;\n\n            case 35:\n              _context15.prev = 35;\n              _context15.t0 = _context15[\"catch\"](24);\n              console.error('Error syncing LocalDatastore: ', _context15.t0);\n              _this8.isSyncing = false;\n\n            case 39:\n            case \"end\":\n              return _context15.stop();\n          }\n        }\n      }, _callee8, null, [[24, 35]]);\n    }))();\n  },\n  getKeyForObject: function (object\n  /*: any*/\n  ) {\n    var _context16, _context17;\n\n    var objectId = object.objectId || object._getId();\n\n    return (0, _concat.default)(_context16 = (0, _concat.default)(_context17 = \"\".concat(_LocalDatastoreUtils.OBJECT_PREFIX)).call(_context17, object.className, \"_\")).call(_context16, objectId);\n  },\n  getPinName: function (pinName\n  /*: ?string*/\n  ) {\n    if (!pinName || pinName === _LocalDatastoreUtils.DEFAULT_PIN) {\n      return _LocalDatastoreUtils.DEFAULT_PIN;\n    }\n\n    return _LocalDatastoreUtils.PIN_PREFIX + pinName;\n  },\n  checkIfEnabled: function () {\n    if (!this.isEnabled) {\n      console.error('Parse.enableLocalDatastore() must be called first');\n    }\n\n    return this.isEnabled;\n  }\n};\nmodule.exports = LocalDatastore;\n\n_CoreManager.default.setLocalDatastoreController(require('./LocalDatastoreController'));\n\n_CoreManager.default.setLocalDatastore(LocalDatastore);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}